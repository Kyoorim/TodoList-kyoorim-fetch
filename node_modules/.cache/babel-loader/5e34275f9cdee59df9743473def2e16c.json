{"ast":null,"code":"var _jsxFileName = \"/Users/kyoorim/Desktop/Todos-fetch/src/App.js\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport TodoList from \"./components/TodoList\";\nimport AddTodo from \"./components/AddTodo\";\nimport \"./App.css\";\n\nfunction App() {\n  const [todos, setTodos] = useState([]); // 화면 불러오고 있는 중에 로딩 표시 처리\n\n  const [isLoading, setIsLoading] = useState(false); //에러상태 처리\n\n  const [error, setError] = useState(null); //------useCallback을 사용한 경우\n\n  const fetchTodosHandler = useCallback(async () => {\n    setIsLoading(true);\n    setError(null); // try {} catch{}로 오류 처리 해주기\n    // GET요청 관련 fetch\n\n    try {\n      const response = await fetch(\"https://udemy-react-http-77f19-default-rtdb.firebaseio.com/todos.json\");\n\n      if (!response.ok) {\n        throw new Error(\"Something went wrong\");\n      }\n\n      const data = await response.json();\n      const loadedTodos = [];\n\n      for (const key in data) {\n        loadedTodos.push({\n          id: key,\n          category: data[key].category,\n          text: data[key].text\n        });\n      }\n\n      setTodos(loadedTodos);\n    } catch (error) {\n      setError(error.message); // \"Something went wrong\"\n    }\n\n    setIsLoading(false);\n  }, []);\n  useEffect(() => {\n    fetchTodosHandler();\n  }, [fetchTodosHandler]); // POST 요청 관련 fetch\n\n  async function addTodoHandler(todo) {\n    const response = await fetch(\"https://udemy-react-http-77f19-default-rtdb.firebaseio.com/todos.json\", {\n      method: \"POST\",\n      body: JSON.stringify(todo),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    const data = await response.json();\n    console.log(data); // 결과값: {name: '-N9a7yhrMvCi1GK_E4-1'} // firebase에서 정한 아이디\n  }\n\n  const deleteListHandler = listId => {\n    setTodos(prevList => {\n      const updatedList = prevList.filter(list => list.id !== listId);\n      return updatedList;\n    });\n  };\n\n  let content = /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, \"Found no todos\");\n\n  if (todos.length > 0) {\n    content = /*#__PURE__*/React.createElement(TodoList, {\n      todos: todos,\n      onDeleteItem: deleteListHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 15\n      }\n    });\n  }\n\n  if (error) {\n    content = /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }\n    }, error);\n  }\n\n  if (isLoading) {\n    content = /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }\n    }, \"Loading...\");\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, \"TO-DO LIST\"), /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(AddTodo, {\n    onAddTodo: addTodoHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: fetchTodosHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, \"Fetch Todos\")), /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, content));\n}\n\nexport default App;","map":{"version":3,"names":["React","useState","useEffect","useCallback","TodoList","AddTodo","App","todos","setTodos","isLoading","setIsLoading","error","setError","fetchTodosHandler","response","fetch","ok","Error","data","json","loadedTodos","key","push","id","category","text","message","addTodoHandler","todo","method","body","JSON","stringify","headers","console","log","deleteListHandler","listId","prevList","updatedList","filter","list","content","length"],"sources":["/Users/kyoorim/Desktop/Todos-fetch/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\n\nimport TodoList from \"./components/TodoList\";\nimport AddTodo from \"./components/AddTodo\";\nimport \"./App.css\";\n\nfunction App() {\n  const [todos, setTodos] = useState([]);\n  // 화면 불러오고 있는 중에 로딩 표시 처리\n  const [isLoading, setIsLoading] = useState(false);\n  //에러상태 처리\n  const [error, setError] = useState(null);\n\n  //------useCallback을 사용한 경우\n  const fetchTodosHandler = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n\n    // try {} catch{}로 오류 처리 해주기\n    // GET요청 관련 fetch\n    try {\n      const response = await fetch(\n        \"https://udemy-react-http-77f19-default-rtdb.firebaseio.com/todos.json\"\n      );\n      if (!response.ok) {\n        throw new Error(\"Something went wrong\");\n      }\n      const data = await response.json();\n\n      const loadedTodos = [];\n\n      for (const key in data) {\n        loadedTodos.push({\n          id: key,\n          category: data[key].category,\n          text: data[key].text,\n        });\n      }\n      setTodos(loadedTodos);\n    } catch (error) {\n      setError(error.message); // \"Something went wrong\"\n    }\n    setIsLoading(false);\n  }, []);\n\n  useEffect(() => {\n    fetchTodosHandler();\n  }, [fetchTodosHandler]);\n\n  // POST 요청 관련 fetch\n  async function addTodoHandler(todo) {\n    const response = await fetch(\n      \"https://udemy-react-http-77f19-default-rtdb.firebaseio.com/todos.json\",\n      {\n        method: \"POST\",\n        body: JSON.stringify(todo),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    );\n    const data = await response.json();\n    console.log(data); // 결과값: {name: '-N9a7yhrMvCi1GK_E4-1'} // firebase에서 정한 아이디\n  }\n\n  const deleteListHandler = (listId) => {\n    setTodos((prevList) => {\n      const updatedList = prevList.filter((list) => list.id !== listId);\n      return updatedList;\n    });\n  };\n\n  let content = <p>Found no todos</p>;\n  if (todos.length > 0) {\n    content = <TodoList todos={todos} onDeleteItem={deleteListHandler} />;\n  }\n\n  if (error) {\n    content = <p>{error}</p>;\n  }\n\n  if (isLoading) {\n    content = <p>Loading...</p>;\n  }\n\n  return (\n    <div>\n      <h1>TO-DO LIST</h1>\n      <section>\n        <AddTodo onAddTodo={addTodoHandler} />\n      </section>\n      <section>\n        <button onClick={fetchTodosHandler}>Fetch Todos</button>\n      </section>\n      <section>{content}</section>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}